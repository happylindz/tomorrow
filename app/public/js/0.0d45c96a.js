webpackJsonp([0],{"./client/components/archives/index.scss":function(e,t){},"./client/components/skeleton-archives/index.scss":function(e,t){},"./client/components/skeleton-archives/skeleton-archives/index.scss":function(e,t){},"./client/components/skeleton-archives/skeleton-tags/index.scss":function(e,t){},"./client/components/tags/index.scss":function(e,t){},"./client/container/archives/index.jsx":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s("./node_modules/react/index.js"),n=s.n(a),c=s("./node_modules/react-redux/es/index.js"),i=s("./client/actions/index.js"),l=s("./client/constants/index.js");var r,o=s("./node_modules/react-router-dom/es/index.js"),m=(s("./client/components/tags/index.scss"),({tags:e,topic:t})=>{const s=e.all;return n.a.createElement("nav",{className:"archives-nav"},n.a.createElement(o.c,{strict:!0,to:"/archives",isActive:()=>""===t||"undefined"===t,activeClassName:"active",className:"tag"},`全部文章(${s})`),Object.keys(e).map(s=>"all"===s?null:n.a.createElement(o.c,{strict:!0,isActive:()=>t===s,key:s,activeClassName:"active",to:`/archives?topic=${encodeURI(s)}`,className:"tag"},`${s}(${e[s]})`)))}),d=s("./client/components/banner/index.jsx"),v=(s("./client/components/archives/index.scss"),({posts:e})=>n.a.createElement("section",{className:"archives-main"},Object.keys(e).map(e=>parseInt(e,10)).sort((e,t)=>t-e).map(t=>n.a.createElement("div",{className:"archives",key:t},n.a.createElement("p",{className:"year"},t,"年"),e[t].map(e=>n.a.createElement("section",{className:"archives-item",key:e._id},n.a.createElement("span",{className:"time"},e.day),n.a.createElement(o.b,{onClick:()=>{window.scrollTo(0,0)},to:`/article/${e.url}`},e.title))))))),p=(s("./client/components/skeleton-archives/index.scss"),s("./client/components/skeleton-banner/index.jsx")),h=(s("./client/components/skeleton-archives/skeleton-tags/index.scss"),()=>n.a.createElement("div",{className:"skeleton-tags"},[1,2,3,4,5,6,7,8,9,10,11,12].map(e=>n.a.createElement("div",{key:e,className:"skeleton-tag-item"},n.a.createElement("div",{className:"animated-background"}))))),u=(s("./client/components/skeleton-archives/skeleton-archives/index.scss"),()=>n.a.createElement("div",{className:"skeleton-archives"},[1,2,3].map(e=>n.a.createElement("div",{key:e,className:"skeleton-archives-item"},n.a.createElement("div",{className:"animated-background title"}),n.a.createElement("div",{className:"line"},n.a.createElement("div",{className:"animated-background"})),n.a.createElement("div",{className:"line"},n.a.createElement("div",{className:"animated-background"})),n.a.createElement("div",{className:"line"},n.a.createElement("div",{className:"animated-background"})))))),E=()=>n.a.createElement("section",{className:"skeleton-wrapper"},n.a.createElement(p.a,null),n.a.createElement(h,null),n.a.createElement(u,null)),k=s("./client/services/sql.js"),g=s.n(k),N=s("./client/util/cache.js");s("./client/container/archives/index.scss");s.d(t,"default",function(){return x});var f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e};let x=Object(c.b)((e,t)=>{const s=e.archives.posts,a=t.location.search,n={all:s.length};let c={},i="";return""!==a&&(i=decodeURI((e=>{const t={};let s=[],a="",n="",c=e.substring(e.indexOf("?")+1,e.length).split("&");for(let e=0;e<c.length;e++)a=(s=c[e].split("="))[0],n=s[1],t[a]=n;return t})(a).topic)||""),s.forEach(e=>{try{const t=e.tags.split(",");if(""===i||"undefined"===i){const t=e.year;c[t]||(c[t]=[]),c[t].push(e)}for(let s of t){if(s===i){const t=e.year;c[t]||(c[t]=[]),c[t].push(e)}n[s]?n[s]+=1:n[s]=1}}catch(e){}}),f({},e.archives,{tags:n,topic:i,posts:c,originPosts:s})},e=>({fetchArchivesData:t=>{e(Object(i.c)(t))}}))(r=class extends a.PureComponent{componentDidMount(){const e=this.props.state;if(e===l.INITIAL_STATE||e===l.FAILURE_STATE)this.props.fetchArchivesData();else{const e=g.a.archivesSQL();Object(N.a)(`/graphql?query=${g.a.encode(e.query)}`,{data:{posts:{posts:this.props.originPosts}}})}}render(){var e=this.props;const t=e.posts,s=e.state,a=e.tags,c=e.topic;switch(s){case l.INITIAL_STATE:case l.LOADING_STATE:return n.a.createElement(E,null);case l.SUCCESS_STATE:return[n.a.createElement(d.a,{title:"Archives",key:"banner",cover:"//images.lindongzhou.com/website/archives-banner.jpg"}),n.a.createElement("div",{key:"archives-body",className:"archives-body"},n.a.createElement(m,{tags:a,topic:c}),n.a.createElement(v,{posts:t}))];default:return n.a.createElement("section",{className:"loading-failure"},"系统繁忙，请稍后重试")}}})||r},"./client/container/archives/index.scss":function(e,t){}});